---
description: Startup routine to initialize SSH tunnel to remote Docker DB and start Next.js dev server.
---

// turbo-all

> **–í–ê–ñ–ù–û:** –û–±—â–µ–Ω–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –æ—Ç—á–µ—Ç—ã ‚Äî –¢–û–õ–¨–ö–û –Ω–∞ **—Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ**.

> **–í–ê–ñ–ù–û–ï –ü–†–ê–í–ò–õ–û:** –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç workflow –∏–ª–∏ —Å–∫—Ä–∏–ø—Ç `./scripts/dev.sh`. 
> **–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:** –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ `localhost:5432`. –ë–µ–∑ SSH-—Ç—É–Ω–Ω–µ–ª—è —ç—Ç–∞ "–¥–≤–µ—Ä—å" –ª–∏–±–æ –∑–∞–∫—Ä—ã—Ç–∞, –ª–∏–±–æ –≤–µ–¥–µ—Ç –∫ –≤–∞—à–µ–π –ª–æ–∫–∞–ª—å–Ω–æ–π –ø—É—Å—Ç–æ–π –ë–î —Å –¥—Ä—É–≥–∏–º –ø–∞—Ä–æ–ª–µ–º. –¢—É–Ω–Ω–µ–ª—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä 89.104.69.25.

1. –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ç—É–Ω–Ω–µ–ª–µ–π –∏ –ø–æ—Ä—Ç–∞ 5432.
```bash
lsof -ti:5432 | xargs kill -9 2>/dev/null || true
lsof -ti:6379 | xargs kill -9 2>/dev/null || true
```

2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ SSH-—Ç—É–Ω–Ω–µ–ª—è –∫ —É–¥–∞–ª–µ–Ω–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É (89.104.69.25).
```bash
ssh -i ~/.ssh/antigravity_key -f -N -L 5432:127.0.0.1:5432 -L 6379:127.0.0.1:6379 root@89.104.69.25 && sleep 1
```

3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è:** –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–∞—Ä–æ–ª—å 'postgres' –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, —á—Ç–æ–±—ã –æ–Ω –≤—Å–µ–≥–¥–∞ —Å–æ–≤–ø–∞–¥–∞–ª —Å –≤–∞—à–∏–º .env.local.
```bash
ssh -i ~/.ssh/antigravity_key root@89.104.69.25 "docker exec merch-crm-db psql -U postgres -c \"ALTER USER postgres WITH PASSWORD '5738870192e24949b02a700547743048';\""
```

4. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ —Å –ø—Ä–æ–¥–∞–∫—à–Ω–∞** (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è SKU, –∞–≤–∞—Ç–∞—Ä—ã, –ª–æ–≥–æ—Ç–∏–ø –±—Ä–µ–Ω–¥–∏–Ω–≥–∞).
> –ü–∞–ø–∫–∞ `local-storage/` –≤ `.gitignore`, —Ñ–∞–π–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω-—Å–µ—Ä–≤–µ—Ä–µ. –ë–µ–∑ —ç—Ç–æ–≥–æ —à–∞–≥–∞ –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±—É–¥—É—Ç 404.
```bash
mkdir -p local-storage && rsync -az -e "ssh -i ~/.ssh/antigravity_key" root@89.104.69.25:/root/merch-crm/local-storage/ ./local-storage/
```

5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
```bash
node scripts/check-connection.js
```

6. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
```bash
npm run dev
```

7. –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
> **–í–ê–ñ–ù–û:** –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞, –∞–≥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –∏–∑—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã.
–°–Ω–∞—á–∞–ª–∞ –∏–∑—É—á–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–∫–∏ –∞–≥–µ–Ω—Ç–∞:
```bash
ls -F .agent/
```
–ó–∞—Ç–µ–º –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã UX –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
cat .agent/UX_STANDARDS.md .agent/development_standards.md
```

---

### üìÇ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤

> –ü–∞–ø–∫–∞ `local-storage/` —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –ø—Ä–æ–¥–∞–∫—à–Ω–∞ —á–µ—Ä–µ–∑ `rsync` –ø–æ SSH –Ω–∞ —à–∞–≥–µ 4.
> –§–∞–π–ª—ã –ù–ï –∫–æ–º–º–∏—Ç—è—Ç—Å—è –≤ git (–≤ `.gitignore`). –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∏–ª–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –ø—Ä–æ–¥–µ ‚Äî –Ω—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å rsync.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- `local-storage/SKU/` ‚Äî –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
- `local-storage/avatars/` ‚Äî –∞–≤–∞—Ç–∞—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `local-storage/branding/` ‚Äî –ª–æ–≥–æ—Ç–∏–ø, —Ñ–∞–≤–∏–∫–æ–Ω

**API-—Ä–æ—É—Ç** `app/api/storage/local/[...path]/route.ts` —á–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª—ã –Ω–∞–ø—Ä—è–º—É—é –∏–∑ —ç—Ç–æ–π –ø–∞–ø–∫–∏.
